"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7197],{6013:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>h,frontMatter:()=>c,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"callbacks/onStageEnded()","title":"<span class=\\"h1style\\">Game Callbacks - Stage End</span>","description":"Welcome to the documentation for the onStageEnded() function! This guide will help understand the code and its features. This page is verified by: Vedant Kejariwal","source":"@site/docs/callbacks/onStageEnded().md","sourceDirName":"callbacks","slug":"/callbacks/onStageEnded()","permalink":"/MVAh2hDocs/docs/callbacks/onStageEnded()","draft":false,"unlisted":false,"editUrl":"https://github.com/VedantKejariwal/MVAh2hDocs/edit/main/docs/callbacks/onStageEnded().md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_label":"Empirica.onStageEnded()","sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Empirica.onRoundStart()","permalink":"/MVAh2hDocs/docs/callbacks/onRoundStart()"},"next":{"title":"Client Stages Docs","permalink":"/MVAh2hDocs/docs/category/client-stages-docs"}}');var i=s(4848),l=s(8453);const c={sidebar_label:"Empirica.onStageEnded()",sidebar_position:3},t="Game Callbacks - Stage End",d={},o=[{value:'<span class="h2style">Functions</span>',id:"functions",level:2},{value:'<span class="custom-function-heading">Condition: <code>if (stage.get(&quot;name&quot;) === &quot;SelectRole&quot;)</code></span>',id:"condition-if-stagegetname--selectrole",level:3},{value:"Explanation:",id:"explanation",level:4},{value:'<span class="custom-function-heading">Condition: <code>if (stage.get(&quot;name&quot;) === &quot;ProducerChoice&quot;)</code></span>',id:"condition-if-stagegetname--producerchoice",level:3},{value:"Explanation:",id:"explanation-1",level:4},{value:"Explanation:",id:"explanation-2",level:4},{value:"Explanation:",id:"explanation-3",level:4},{value:'<span class="custom-function-heading">Condition: <code>if (stage.get(&quot;name&quot;) === &quot;ConsumerChoice&quot;)</code></span>',id:"condition-if-stagegetname--consumerchoice",level:3},{value:"Explanation:",id:"explanation-4",level:4},{value:"Explanation:",id:"explanation-5",level:4},{value:"Explanation:",id:"explanation-6",level:4},{value:'<span class="custom-function-heading">Condition: <code>if (stage.get(&quot;name&quot;) === &quot;Results&quot;)</code></span>',id:"condition-if-stagegetname--results",level:3},{value:"Explanation:",id:"explanation-7",level:4},{value:"Explanation:",id:"explanation-8",level:4},{value:"Explanation:",id:"explanation-9",level:4},{value:"Explanation:",id:"explanation-10",level:4},{value:'<span class="custom-function-heading">Condition: <code>if (stage.get(&quot;name&quot;) === &quot;Feedback&quot;)</code></span>',id:"condition-if-stagegetname--feedback",level:3},{value:"Explanation:",id:"explanation-11",level:4},{value:"<strong>Fetching Consumers</strong>",id:"fetching-consumers",level:4},{value:"<strong>Processing Producer Challenges</strong>",id:"processing-producer-challenges",level:4},{value:"Explanation:",id:"explanation-12",level:4},{value:"<strong>Identifying Challengers</strong>",id:"identifying-challengers",level:5},{value:"<strong>Updating Producer Reviews</strong>",id:"updating-producer-reviews",level:5},{value:"<strong>Evaluating Challenge Outcomes</strong>",id:"evaluating-challenge-outcomes",level:4},{value:"<strong>If the product had no warranties or was not sold</strong>",id:"if-the-product-had-no-warranties-or-was-not-sold",level:5},{value:"<strong>If the product was sold, but there were no challenges</strong>",id:"if-the-product-was-sold-but-there-were-no-challenges",level:5},{value:"<strong>If the product was sold and challenged</strong>",id:"if-the-product-was-sold-and-challenged",level:5},{value:"<strong>If the producer\u2019s product was high quality</strong>",id:"if-the-producers-product-was-high-quality",level:6},{value:"<strong>If the producer\u2019s product was low quality</strong>",id:"if-the-producers-product-was-low-quality",level:6},{value:"<strong>If a product was warranted but not challenged</strong>",id:"if-a-product-was-warranted-but-not-challenged",level:5},{value:"<strong>Processing Consumer Score Updates</strong>",id:"processing-consumer-score-updates",level:4},{value:"Explanation:",id:"explanation-13",level:4},{value:"<strong>Updating Consumer Scores</strong>",id:"updating-consumer-scores",level:5},{value:"<strong>If the consumer purchased a low-quality product but did not challenge it</strong>",id:"if-the-consumer-purchased-a-low-quality-product-but-did-not-challenge-it",level:6},{value:"<strong>If the consumer purchased a low-quality product and challenged it</strong>",id:"if-the-consumer-purchased-a-low-quality-product-and-challenged-it",level:6},{value:"<strong>If the consumer purchased a high-quality product</strong>",id:"if-the-consumer-purchased-a-high-quality-product",level:6},{value:"<strong>Finalizing Consumer Score Updates</strong>",id:"finalizing-consumer-score-updates",level:5},{value:"Logical Flow",id:"logical-flow",level:3}];function a(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"game-callbacks---stage-end",children:(0,i.jsx)("span",{class:"h1style",children:"Game Callbacks - Stage End"})})}),"\n",(0,i.jsxs)(n.p,{children:["Welcome to the documentation for the ",(0,i.jsx)(n.code,{children:"onStageEnded()"})," function! This guide will help understand the code and its features. This page is verified by: ",(0,i.jsx)(n.em,{children:"Vedant Kejariwal"})]}),"\n",(0,i.jsx)(n.h2,{id:"functions",children:(0,i.jsx)("span",{class:"h2style",children:"Functions"})}),"\n",(0,i.jsx)(n.p,{children:"This is the list of sections that are defined in this function:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsxs)(n.strong,{children:["Condition: ",(0,i.jsx)(n.code,{children:'if (stage.get("name") === "SelectRole")'})]})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsxs)(n.strong,{children:["Condition: ",(0,i.jsx)(n.code,{children:'if (stage.get("name") === "ProducerChoice")'})]})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsxs)(n.strong,{children:["Condition: ",(0,i.jsx)(n.code,{children:'if (stage.get("name") === "ConsumerChoice")'})]})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsxs)(n.strong,{children:["Condition: ",(0,i.jsx)(n.code,{children:'if (stage.get("name") === "Results")'})]})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsxs)(n.strong,{children:["Condition: ",(0,i.jsx)(n.code,{children:'if (stage.get("name") === "Feedback")'})]})}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"condition-if-stagegetname--selectrole",children:(0,i.jsxs)("span",{class:"custom-function-heading",children:["Condition: ",(0,i.jsx)(n.code,{children:'if (stage.get("name") === "SelectRole")'})]})}),"\n",(0,i.jsx)(n.h4,{id:"explanation",children:"Explanation:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["This condition checks if the game has reached the ",(0,i.jsx)(n.code,{children:"SelectRole"})," stage."]}),"\n",(0,i.jsx)(n.li,{children:"At this stage, each producer is assigned a unique brand name."}),"\n",(0,i.jsxs)(n.li,{children:["The function ",(0,i.jsx)(n.code,{children:"getRandomName()"})," is used to generate a new brand identity, ensuring brand differentiation among players."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"condition-if-stagegetname--producerchoice",children:(0,i.jsxs)("span",{class:"custom-function-heading",children:["Condition: ",(0,i.jsx)(n.code,{children:'if (stage.get("name") === "ProducerChoice")'})]})}),"\n",(0,i.jsx)(n.h4,{id:"explanation-1",children:"Explanation:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["This condition ensures that necessary updates occur when the game enters the ",(0,i.jsx)(n.code,{children:"ProducerChoice"})," stage."]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"ProducerChoice"})," stage is where producers make strategic decisions about product quality, branding, and pricing."]}),"\n",(0,i.jsx)(n.li,{children:"Resetting and updating values at this stage ensures a fair restart for all players."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'if (player.get("role") === "producer")'})})}),"\n",(0,i.jsx)(n.h4,{id:"explanation-2",children:"Explanation:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"This block checks if the player is a producer."}),"\n",(0,i.jsxs)(n.li,{children:["The producer\u2019s ",(0,i.jsx)(n.code,{children:"changedBrand"})," flag is updated to ",(0,i.jsx)(n.code,{children:"false"})," at the beginning of this stage."]}),"\n",(0,i.jsx)(n.li,{children:"This ensures that the producer\u2019s decision to change their brand in a previous round does not persist into future rounds."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'if (player.get("role") === "consumer")'})})}),"\n",(0,i.jsx)(n.h4,{id:"explanation-3",children:"Explanation:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"This block checks if the player is a consumer."}),"\n",(0,i.jsxs)(n.li,{children:["The consumer\u2019s ",(0,i.jsx)(n.code,{children:"consumerReviews"})," object is reset to ",(0,i.jsx)(n.code,{children:"{}"}),", ensuring previous feedback does not influence future rounds."]}),"\n",(0,i.jsxs)(n.li,{children:["The consumer\u2019s wallet is increased by ",(0,i.jsx)(n.code,{children:"3 * highQualProdCost"})," to simulate income for the next round."]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"wallet"})," update is crucial as it allows consumers to participate in the upcoming product selection."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"condition-if-stagegetname--consumerchoice",children:(0,i.jsxs)("span",{class:"custom-function-heading",children:["Condition: ",(0,i.jsx)(n.code,{children:'if (stage.get("name") === "ConsumerChoice")'})]})}),"\n",(0,i.jsx)(n.h4,{id:"explanation-4",children:"Explanation:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["This condition ensures that updates are made when the ",(0,i.jsx)(n.code,{children:"ConsumerChoice"})," stage is reached."]}),"\n",(0,i.jsx)(n.li,{children:"Consumers make purchasing decisions in this stage, selecting products from available producers."}),"\n",(0,i.jsx)(n.li,{children:"At this stage, the game needs to track which consumers have purchased from which producers."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'if (player.get("role") === "producer")'})})}),"\n",(0,i.jsx)(n.h4,{id:"explanation-5",children:"Explanation:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"This block checks if the player is a producer."}),"\n",(0,i.jsxs)(n.li,{children:["The function identifies which consumers have purchased from the producer by checking ",(0,i.jsx)(n.code,{children:"consumer.cart"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["The list of consumers who bought from the producer is stored in ",(0,i.jsx)(n.code,{children:"sold"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'if (player.get("role") === "consumer")'})})}),"\n",(0,i.jsx)(n.h4,{id:"explanation-6",children:"Explanation:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"This block checks if the player is a consumer."}),"\n",(0,i.jsxs)(n.li,{children:["The function updates ",(0,i.jsx)(n.code,{children:"purchasedFrom"}),", which stores the list of producers each consumer has bought from."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"condition-if-stagegetname--results",children:(0,i.jsxs)("span",{class:"custom-function-heading",children:["Condition: ",(0,i.jsx)(n.code,{children:'if (stage.get("name") === "Results")'})]})}),"\n",(0,i.jsx)(n.h4,{id:"explanation-7",children:"Explanation:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["This condition executes when the game reaches the ",(0,i.jsx)(n.code,{children:"Results"})," stage."]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"Results"})," stage processes the final calculations for each round and resets necessary attributes."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'if (player.get("changedBrand").slice(-1)[0] === true)'})})}),"\n",(0,i.jsx)(n.h4,{id:"explanation-8",children:"Explanation:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"This block checks if the producer decided to change their brand at the end of the round."}),"\n",(0,i.jsxs)(n.li,{children:["If ",(0,i.jsx)(n.code,{children:"changedBrand"})," is ",(0,i.jsx)(n.code,{children:"true"}),", the producer is assigned a new brand name using ",(0,i.jsx)(n.code,{children:"getRandomName()"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"reviews"})," array is reset with ",(0,i.jsx)(n.code,{children:"[0,0]"}),", ensuring the producer starts with a fresh reputation."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'if (player.get("role") === "consumer")'})})}),"\n",(0,i.jsx)(n.h4,{id:"explanation-9",children:"Explanation:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["This block resets the consumer\u2019s ",(0,i.jsx)(n.code,{children:"consumerReviews"})," object."]}),"\n",(0,i.jsxs)(n.li,{children:["The consumer\u2019s ",(0,i.jsx)(n.code,{children:"wallet"})," is increased, ensuring they have sufficient funds for the next round."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"else (for producers)"})})}),"\n",(0,i.jsx)(n.h4,{id:"explanation-10",children:"Explanation:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"This block updates producer finances."}),"\n",(0,i.jsxs)(n.li,{children:["The producer\u2019s ",(0,i.jsx)(n.code,{children:"capital"})," is increased, ensuring they have resources for the next round."]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"claims"})," array is reset to ",(0,i.jsx)(n.code,{children:"[0, 0]"}),", ensuring fairness by clearing previous claim records."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"condition-if-stagegetname--feedback",children:(0,i.jsxs)("span",{class:"custom-function-heading",children:["Condition: ",(0,i.jsx)(n.code,{children:'if (stage.get("name") === "Feedback")'})]})}),"\n",(0,i.jsx)(n.h4,{id:"explanation-11",children:"Explanation:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["This condition executes when the game reaches the ",(0,i.jsx)(n.strong,{children:"Feedback"})," stage."]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.strong,{children:"Feedback"})," stage processes consumer challenges, producer adjustments, and score updates."]}),"\n",(0,i.jsx)(n.li,{children:"At this point, the game determines which producers were challenged, which claims were successful, and how players' reputations and scores should be updated."}),"\n",(0,i.jsxs)(n.li,{children:["This is a critical part of the game, as it ",(0,i.jsx)(n.strong,{children:"resolves interactions between consumers and producers"})," by verifying product quality and ensuring fair market mechanisms."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h4,{id:"fetching-consumers",children:(0,i.jsx)(n.strong,{children:"Fetching Consumers"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'const consumers = players.filter((p) => p.get("role") === "consumer");'})})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The function first retrieves all players with the ",(0,i.jsx)(n.strong,{children:"consumer"})," role."]}),"\n",(0,i.jsxs)(n.li,{children:["This is necessary because ",(0,i.jsx)(n.strong,{children:"consumers are the ones who issue challenges"}),", and their actions must be processed at this stage."]}),"\n",(0,i.jsx)(n.li,{children:"By filtering players based on role, the function ensures that only consumers' challenges are considered when evaluating producers' performance."}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h4,{id:"processing-producer-challenges",children:(0,i.jsx)(n.strong,{children:"Processing Producer Challenges"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'if (player.get("role") === "producer")'})})}),"\n",(0,i.jsx)(n.h4,{id:"explanation-12",children:"Explanation:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["This block ensures that updates for ",(0,i.jsx)(n.strong,{children:"producers"})," occur correctly."]}),"\n",(0,i.jsxs)(n.li,{children:["A ",(0,i.jsx)(n.strong,{children:"challenge tracking array"})," (",(0,i.jsx)(n.code,{children:"challengeOnRound"}),") is initialized to store the names of consumers who challenged a given producer."]}),"\n",(0,i.jsxs)(n.li,{children:["The function loops over ",(0,i.jsx)(n.strong,{children:"all consumers"})," to determine who issued a challenge against the producer."]}),"\n"]}),"\n",(0,i.jsx)(n.h5,{id:"identifying-challengers",children:(0,i.jsx)(n.strong,{children:"Identifying Challengers"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"if (currentChallenge.length === 0)"})})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Each consumer's ",(0,i.jsx)(n.code,{children:"currentChallenge"})," array is checked to see if it contains the producer\u2019s name."]}),"\n",(0,i.jsxs)(n.li,{children:["If a consumer has ",(0,i.jsx)(n.strong,{children:"not"})," issued a challenge, ",(0,i.jsx)(n.code,{children:'"No Challenge"'})," is recorded."]}),"\n",(0,i.jsxs)(n.li,{children:["This means that the consumer ",(0,i.jsx)(n.strong,{children:"accepted"})," the producer\u2019s product without questioning its quality."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'else if (currentChallenge.indexOf(player.get("name")) !== -1)'})})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["If a consumer ",(0,i.jsx)(n.strong,{children:"has"})," issued a challenge, their name is added to the ",(0,i.jsx)(n.code,{children:"challengeOnRound"})," list."]}),"\n",(0,i.jsxs)(n.li,{children:["This ensures that each producer knows ",(0,i.jsx)(n.strong,{children:"which consumers have disputed their product claims"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["After looping through all consumers, ",(0,i.jsx)(n.code,{children:'player.get("challenges")'})," is updated with the new list of challenges."]}),"\n"]}),"\n",(0,i.jsx)(n.h5,{id:"updating-producer-reviews",children:(0,i.jsx)(n.strong,{children:"Updating Producer Reviews"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'let reviews = player.get("reviews"); reviews.push(most_recent_review);'})})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The producer's ",(0,i.jsx)(n.code,{children:"reviews"})," array is updated by adding a duplicate of the most recent review entry."]}),"\n",(0,i.jsxs)(n.li,{children:["This ensures that ",(0,i.jsx)(n.strong,{children:"only new feedback impacts the producer\u2019s reputation"}),", rather than overwriting past reviews."]}),"\n",(0,i.jsxs)(n.li,{children:["Reviews are ",(0,i.jsx)(n.strong,{children:"persistent"}),", meaning that each round accumulates new consumer feedback."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h4,{id:"evaluating-challenge-outcomes",children:(0,i.jsx)(n.strong,{children:"Evaluating Challenge Outcomes"})}),"\n",(0,i.jsx)(n.h5,{id:"if-the-product-had-no-warranties-or-was-not-sold",children:(0,i.jsx)(n.strong,{children:"If the product had no warranties or was not sold"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'if ((warrants === null || warrants.slice(-1)[0] === false) && player.get("sold").slice(-1)[0].length > 0)'})})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["If the producer ",(0,i.jsx)(n.strong,{children:"did not issue a warranty"})," and their product ",(0,i.jsx)(n.strong,{children:"was sold"}),", then the outcome is based on ",(0,i.jsx)(n.strong,{children:"consumer feedback"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["The consumer\u2019s reviews are checked to determine whether the producer receives a ",(0,i.jsx)(n.strong,{children:"positive or negative"})," rating."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Why does this check matter?"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["If a product ",(0,i.jsx)(n.strong,{children:"was not warranted"}),", a ",(0,i.jsx)(n.strong,{children:"negative review"})," from a consumer holds more weight."]}),"\n",(0,i.jsxs)(n.li,{children:["Producers that consistently ",(0,i.jsx)(n.strong,{children:"fail to provide warranties"})," are more susceptible to negative ratings."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h5,{id:"if-the-product-was-sold-but-there-were-no-challenges",children:(0,i.jsx)(n.strong,{children:"If the product was sold, but there were no challenges"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'if (player.get("sold").slice(-1)[0].indexOf(cons.get("name")) === -1)'})})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["If a consumer bought the product but ",(0,i.jsx)(n.strong,{children:"did not challenge it"}),", the producer ",(0,i.jsx)(n.strong,{children:"automatically gains a positive review"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"challengesLost"})," array is updated with ",(0,i.jsx)(n.code,{children:'"N/A"'}),", meaning the producer ",(0,i.jsx)(n.strong,{children:"did not lose a challenge"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Why is this important?"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["If a producer sells a product and ",(0,i.jsx)(n.strong,{children:"no consumer disputes it"}),", it suggests that the product met expectations."]}),"\n",(0,i.jsxs)(n.li,{children:["This helps ",(0,i.jsx)(n.strong,{children:"reinforce market credibility"})," for producers."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h5,{id:"if-the-product-was-sold-and-challenged",children:(0,i.jsx)(n.strong,{children:"If the product was sold and challenged"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'if (player.get("challenges").slice(-1)[0].includes(cons.get("name")) )'})})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["If a consumer ",(0,i.jsx)(n.strong,{children:"challenged"})," the producer, the function determines whether the challenge was ",(0,i.jsx)(n.strong,{children:"successful or unsuccessful"})," based on product quality."]}),"\n",(0,i.jsx)(n.li,{children:"The producer\u2019s financials and reputation are updated accordingly."}),"\n"]}),"\n",(0,i.jsx)(n.h6,{id:"if-the-producers-product-was-high-quality",children:(0,i.jsx)(n.strong,{children:"If the producer\u2019s product was high quality"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'if (player.get("productQuality").slice(-1)[0] === "high")'})})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The producer ",(0,i.jsx)(n.strong,{children:"wins"})," the challenge."]}),"\n",(0,i.jsxs)(n.li,{children:["Their ",(0,i.jsx)(n.strong,{children:"capital is increased"})," by the ",(0,i.jsx)(n.strong,{children:"warrant cost refund"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Their ",(0,i.jsx)(n.code,{children:"challengesLost"})," array records ",(0,i.jsx)(n.code,{children:'"Challenge Won"'}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Their ",(0,i.jsx)(n.strong,{children:"positive review count"})," increases."]}),"\n",(0,i.jsxs)(n.li,{children:["They gain a ",(0,i.jsx)(n.strong,{children:"score boost"})," due to ",(0,i.jsx)(n.strong,{children:"providing high-quality products"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Why does capital increase?"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Since the product ",(0,i.jsx)(n.strong,{children:"was high quality"}),", the challenge was unjustified."]}),"\n",(0,i.jsxs)(n.li,{children:["The producer ",(0,i.jsx)(n.strong,{children:"recovers"})," the cost of the warranty, reinforcing ",(0,i.jsx)(n.strong,{children:"trust in self-certification"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h6,{id:"if-the-producers-product-was-low-quality",children:(0,i.jsx)(n.strong,{children:"If the producer\u2019s product was low quality"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'else if (player.get("productQuality").slice(-1)[0] === "low")'})})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The producer ",(0,i.jsx)(n.strong,{children:"loses"})," the challenge."]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.strong,{children:"consumer is refunded"})," their challenge cost."]}),"\n",(0,i.jsxs)(n.li,{children:["The producer\u2019s ",(0,i.jsx)(n.strong,{children:"capital decreases"})," by the ",(0,i.jsx)(n.strong,{children:"challenge reward"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Their ",(0,i.jsx)(n.strong,{children:"negative review count"})," increases."]}),"\n",(0,i.jsxs)(n.li,{children:["Their ",(0,i.jsx)(n.code,{children:"challengesLost"})," array records ",(0,i.jsx)(n.code,{children:'"Challenge Lost"'}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["They ",(0,i.jsx)(n.strong,{children:"lose score points"})," due to ",(0,i.jsx)(n.strong,{children:"false advertising"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Why does the producer lose money?"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Since they ",(0,i.jsx)(n.strong,{children:"misled consumers"}),", they ",(0,i.jsx)(n.strong,{children:"forfeit"})," money to compensate for their deception."]}),"\n",(0,i.jsxs)(n.li,{children:["This discourages producers from ",(0,i.jsx)(n.strong,{children:"selling low-quality products under false claims"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h5,{id:"if-a-product-was-warranted-but-not-challenged",children:(0,i.jsx)(n.strong,{children:"If a product was warranted but not challenged"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'if (prod.get("warrants").slice(-1)[0])'})})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["If the producer ",(0,i.jsx)(n.strong,{children:"issued a warranty"})," and ",(0,i.jsx)(n.strong,{children:"was not challenged"}),", they gain ",(0,i.jsx)(n.strong,{children:"a small positive reputation boost"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Why does this happen?"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Offering a warranty builds consumer trust."}),"\n",(0,i.jsxs)(n.li,{children:["Even if no one ",(0,i.jsx)(n.strong,{children:"needed to challenge the product"}),", the act of warranting ",(0,i.jsx)(n.strong,{children:"signals reliability"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h4,{id:"processing-consumer-score-updates",children:(0,i.jsx)(n.strong,{children:"Processing Consumer Score Updates"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'if (player.get("role") === "consumer")'})})}),"\n",(0,i.jsx)(n.h4,{id:"explanation-13",children:"Explanation:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["This block processes ",(0,i.jsx)(n.strong,{children:"consumer-side updates"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["The consumer\u2019s ",(0,i.jsx)(n.code,{children:"cart"})," is ",(0,i.jsx)(n.strong,{children:"reset"})," to an empty array to prepare for the next round."]}),"\n",(0,i.jsxs)(n.li,{children:["The function identifies ",(0,i.jsx)(n.strong,{children:"which producers the consumer purchased from"})," and updates the ",(0,i.jsx)(n.code,{children:"purchasedFrom"})," array."]}),"\n"]}),"\n",(0,i.jsx)(n.h5,{id:"updating-consumer-scores",children:(0,i.jsx)(n.strong,{children:"Updating Consumer Scores"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'const playersPurchased = purchasedFrom.map((name) => players.find((p) => p.get("name") === name));'})})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The function loops over ",(0,i.jsx)(n.strong,{children:"all producers the consumer purchased from"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Each producer's ",(0,i.jsx)(n.strong,{children:"challenge records"})," are checked to determine ",(0,i.jsx)(n.strong,{children:"how the consumer should be scored"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.h6,{id:"if-the-consumer-purchased-a-low-quality-product-but-did-not-challenge-it",children:(0,i.jsx)(n.strong,{children:"If the consumer purchased a low-quality product but did not challenge it"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'if (!(roundChallenges.includes(player.get("name"))))'})})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Their score ",(0,i.jsx)(n.strong,{children:"decreases"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["This reflects ",(0,i.jsx)(n.strong,{children:"failing to detect misinformation"})," in the marketplace."]}),"\n"]}),"\n",(0,i.jsx)(n.h6,{id:"if-the-consumer-purchased-a-low-quality-product-and-challenged-it",children:(0,i.jsx)(n.strong,{children:"If the consumer purchased a low-quality product and challenged it"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'else if (roundChallenges.includes(player.get("name")))'})})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Their score ",(0,i.jsx)(n.strong,{children:"increases"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["This reflects ",(0,i.jsx)(n.strong,{children:"actively identifying misinformation"})," and holding producers accountable."]}),"\n"]}),"\n",(0,i.jsx)(n.h6,{id:"if-the-consumer-purchased-a-high-quality-product",children:(0,i.jsx)(n.strong,{children:"If the consumer purchased a high-quality product"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'if (!roundChallenges.includes(player.get("name")))'})})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Their score ",(0,i.jsx)(n.strong,{children:"remains neutral or increases slightly"})," depending on whether they challenged the producer."]}),"\n"]}),"\n",(0,i.jsx)(n.h5,{id:"finalizing-consumer-score-updates",children:(0,i.jsx)(n.strong,{children:"Finalizing Consumer Score Updates"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'player.set("totalScore", totalArr);'})})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The consumer\u2019s total score is updated by summing all ",(0,i.jsx)(n.strong,{children:"individual round scores"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["This cumulative total is stored in ",(0,i.jsx)(n.code,{children:"totalScore"})," for long-term tracking."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"logical-flow",children:"Logical Flow"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Identify Consumers"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Consumers are identified because they ",(0,i.jsx)(n.strong,{children:"issue challenges"})," and must be processed first."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Process Producer Challenges"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Identify which ",(0,i.jsx)(n.strong,{children:"producers were challenged"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Update ",(0,i.jsx)(n.strong,{children:"producer reviews"})," and ",(0,i.jsx)(n.strong,{children:"track challenge outcomes"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Evaluate Challenge Outcomes"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Determine ",(0,i.jsx)(n.strong,{children:"whether producers won or lost challenges"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Update producer ",(0,i.jsx)(n.strong,{children:"capital, reputation, and score"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Update Consumer Scores"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Check ",(0,i.jsx)(n.strong,{children:"which producers consumers purchased from"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Evaluate ",(0,i.jsx)(n.strong,{children:"whether consumers correctly identified misinformation"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Update ",(0,i.jsx)(n.strong,{children:"consumer scores accordingly"}),"."]}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>t});var r=s(6540);const i={},l=r.createContext(i);function c(e){const n=r.useContext(l);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);